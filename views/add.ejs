<%- include('partials/header.ejs'); -%>

<div class="container outline show" style="max-width: 900px !important;">
  <div class="form-container">
    <!-- ---------------- Modal trigger button ---------------- -->
    <button type="button" class="main-button btn-lg mb-3" data-bs-toggle="modal" data-bs-target="#searchModal">
      Find book
    </button>

    <!-- ---------------- Modal ---------------- -->
    <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="searchModalLabel">Search or Select a Book</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="search-results-container">
              <!-- ---------------- Form ---------------- -->
              <div>
                <div class="searchbar-form mb-2" style="position: relative; z-index: 0;">
                  <div class="searchbar-input">
                    <input id="bookSearchInput" type="text" class="form-basic searchbar-input minimize-txt" name="bookSearchInput" title="search input" placeholder="Enter book title, author, or ISBN">
                  </div>
                  <div class="searchbar-button">
                    <button id="book-select" class="main-button btn-sm searchbar-button minimize-txt" type="button">
                      Select
                    </button>
                  </div>
                </div>
                <div id="searchResultsContainer"></div>
                <input type="hidden" id="selectedBookData" name="selectedBook">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

<!-- ---------------- note form ---------------- -->
    <form class="note-form edit-form" action="/add" method="post">
      <% if (locals.bookData) { %>
        <p id="book-title-display"><strong>Book Title: </strong><br><%= bookData.title %></p>
        <p id="author-display"><strong>Author: </strong><br><%= bookData.author %></p>
      <% } else { %>
        <p><strong>Book Title: </strong><br></p>
        <p><strong>Author: </strong><br></p>
      <% }; %>
      <!-- <input type="hidden" name="itemId" required> -->
      <label for="rating"><strong>Rating: </strong></label>
      <select type="radio" id="rating" class="form-basic" name="rating" required>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
      </select>
      <br>
      <label for="start"><strong>Started on: </strong></label>
      <input type="date" id="start" name="start" class="form-basic"><br>
      <label for="finish"><strong>Finished on: </strong></label>
      <input type="date" id="finish" name="finish" class="form-basic" required><br>
      <label for="note"><strong>Note: </strong></label>
      <textarea name="note" class="edit-note form-basic" rows="14" cols="10" wrap="soft" style="overflow-y: scroll; resize: none;"></textarea><br>
      <label for="summary"><strong>Summary: </strong></label>
      <textarea name="summary" class="edit-note form-basic" rows="14" cols="10" wrap="soft" style="overflow-y: scroll; resize: none;"></textarea><br>
      <button class="main-button btn-lg" type="submit">Save</button>
    </form>
  </div>
</div>

<%- include('partials/footer.ejs'); -%>
